{"name":"Log","hostname":"lumi-staging-server","pid":2840,"level":50,"err":{"id":300,"domain":"http://localhost:2368/","code":"ER_TOO_LONG_KEY","name":"MigrationScriptError","statusCode":500,"level":"normal","message":"Field length of `customer_id` in `members_stripe_customers` is too long!","context":"\"This usually happens if your database encoding is utf8mb4.\\nAll unique fields and indexes must be lower than 191 characters.\\nPlease correct your field length and reset your database with knex-migrator reset.\\n\"","help":"\"Read more here: https://github.com/TryGhost/knex-migrator/issues/51\\n\"","stack":"MigrationScriptError: Field length of `customer_id` in `members_stripe_customers` is too long!\n    at MigrationScriptError.KnexMigrateError (/var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new MigrationScriptError (/var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/lib/errors.js:25:26)\n    at /var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/lib/index.js:1045:23\n\nError: ER_TOO_LONG_KEY: Specified key was too long; max key length is 767 bytes\n    at Query.Sequence._packetToError (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/sequences/Sequence.js:47:14)\n    at Query.ErrorPacket (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/sequences/Query.js:79:18)\n    at Protocol._parsePacket (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/Protocol.js:291:23)\n    at Parser._parsePacket (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/Parser.js:433:10)\n    at Parser.write (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/Parser.js:43:10)\n    at Protocol.write (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/Protocol.js:38:16)\n    at Socket.<anonymous> (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/Connection.js:88:28)\n    at Socket.<anonymous> (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/Connection.js:526:10)\n    at Socket.emit (events.js:314:20)\n    at addChunk (_stream_readable.js:297:12)\n    at readableAddChunk (_stream_readable.js:272:9)\n    at Socket.Readable.push (_stream_readable.js:213:10)\n    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)\n    --------------------\n    at Protocol._enqueue (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Connection.query (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/Connection.js:198:25)\n    at /var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:135:18\n    at new Promise (<anonymous>)\n    at Client_MySQL._query (/var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:129:12)\n    at Client_MySQL.query (/var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/node_modules/knex/lib/client.js:169:17)\n    at Runner.query (/var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/node_modules/knex/lib/runner.js:151:36)\n    at Runner.queryArray (/var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/node_modules/knex/lib/runner.js:248:31)\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at async /var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/node_modules/knex/lib/runner.js:277:18"},"msg":"Field length of `customer_id` in `members_stripe_customers` is too long!","time":"2021-03-02T03:20:08.354Z","v":0}
{"name":"Log","hostname":"lumi-staging-server","pid":3515,"level":50,"err":{"id":300,"domain":"http://localhost:2368/","code":"ER_CANT_CREATE_TABLE","name":"MigrationScriptError","statusCode":500,"level":"normal","message":"alter table `members_stripe_customers_subscriptions` add constraint `members_stripe_customers_subscriptions_customer_id_foreign` foreign key (`customer_id`) references `members_stripe_customers` (`customer_id`) on delete CASCADE - ER_CANT_CREATE_TABLE: Can't create table `dbf2z`.`#sql-4fd1_4d19` (errno: 150 \"Foreign key constraint is incorrectly formed\")","context":"{\"name\":\"1-create-tables.js\"}","help":"\"Error occurred while executing the following migration: 1-create-tables.js\"","stack":"MigrationScriptError: alter table `members_stripe_customers_subscriptions` add constraint `members_stripe_customers_subscriptions_customer_id_foreign` foreign key (`customer_id`) references `members_stripe_customers` (`customer_id`) on delete CASCADE - ER_CANT_CREATE_TABLE: Can't create table `dbf2z`.`#sql-4fd1_4d19` (errno: 150 \"Foreign key constraint is incorrectly formed\")\n    at MigrationScriptError.KnexMigrateError (/var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new MigrationScriptError (/var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/lib/errors.js:25:26)\n    at /var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/lib/index.js:1055:19\n\nError: ER_CANT_CREATE_TABLE: Can't create table `dbf2z`.`#sql-4fd1_4d19` (errno: 150 \"Foreign key constraint is incorrectly formed\")\n    at Query.Sequence._packetToError (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/sequences/Sequence.js:47:14)\n    at Query.ErrorPacket (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/sequences/Query.js:79:18)\n    at Protocol._parsePacket (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/Protocol.js:291:23)\n    at Parser._parsePacket (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/Parser.js:433:10)\n    at Parser.write (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/Parser.js:43:10)\n    at Protocol.write (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/Protocol.js:38:16)\n    at Socket.<anonymous> (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/Connection.js:88:28)\n    at Socket.<anonymous> (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/Connection.js:526:10)\n    at Socket.emit (events.js:314:20)\n    at addChunk (_stream_readable.js:297:12)\n    at readableAddChunk (_stream_readable.js:272:9)\n    at Socket.Readable.push (_stream_readable.js:213:10)\n    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)\n    --------------------\n    at Protocol._enqueue (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Connection.query (/var/www/ghostblog/versions/3.41.9/node_modules/mysql/lib/Connection.js:198:25)\n    at /var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:135:18\n    at new Promise (<anonymous>)\n    at Client_MySQL._query (/var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/node_modules/knex/lib/dialects/mysql/index.js:129:12)\n    at Client_MySQL.query (/var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/node_modules/knex/lib/client.js:169:17)\n    at Runner.query (/var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/node_modules/knex/lib/runner.js:151:36)\n    at Runner.queryArray (/var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/node_modules/knex/lib/runner.js:248:31)\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at async /var/www/ghostblog/versions/3.41.9/node_modules/knex-migrator/node_modules/knex/lib/runner.js:277:18"},"msg":"alter table `members_stripe_customers_subscriptions` add constraint `members_stripe_customers_subscriptions_customer_id_foreign` foreign key (`customer_id`) references `members_stripe_customers` (`customer_id`) on delete CASCADE - ER_CANT_CREATE_TABLE: Can't create table `dbf2z`.`#sql-4fd1_4d19` (errno: 150 \"Foreign key constraint is incorrectly formed\")","time":"2021-03-02T03:40:52.355Z","v":0}
{"name":"Log","hostname":"lumi-staging-server","pid":3597,"level":50,"err":{"domain":"http://localhost:2368/","code":"ERR_SERVER_NOT_RUNNING","message":"Server is not running.","stack":"Error [ERR_SERVER_NOT_RUNNING]: Server is not running.\n    at Server.close (net.js:1604:12)\n    at Object.onceWrapper (events.js:420:28)\n    at Server.emit (events.js:314:20)\n    at Server.EventEmitter.emit (domain.js:483:12)\n    at emitCloseNT (net.js:1657:8)\n    at processTicksAndRejections (internal/process/task_queues.js:83:21)"},"msg":"Server is not running.","time":"2021-03-02T03:50:51.401Z","v":0}
{"name":"Log","hostname":"lumi-staging-server","pid":3906,"level":50,"err":{"domain":"http://localhost:2368/","code":"ERR_SERVER_NOT_RUNNING","message":"Server is not running.","stack":"Error [ERR_SERVER_NOT_RUNNING]: Server is not running.\n    at Server.close (net.js:1604:12)\n    at Object.onceWrapper (events.js:420:28)\n    at Server.emit (events.js:314:20)\n    at Server.EventEmitter.emit (domain.js:483:12)\n    at emitCloseNT (net.js:1657:8)\n    at processTicksAndRejections (internal/process/task_queues.js:83:21)"},"msg":"Server is not running.","time":"2021-03-02T04:13:05.170Z","v":0}
{"name":"Log","hostname":"lumi-staging-server","pid":7893,"level":50,"err":{"domain":"http://localhost:2368/","code":"ERR_SERVER_NOT_RUNNING","message":"Server is not running.","stack":"Error [ERR_SERVER_NOT_RUNNING]: Server is not running.\n    at Server.close (net.js:1604:12)\n    at Object.onceWrapper (events.js:420:28)\n    at Server.emit (events.js:314:20)\n    at Server.EventEmitter.emit (domain.js:483:12)\n    at emitCloseNT (net.js:1657:8)\n    at processTicksAndRejections (internal/process/task_queues.js:83:21)"},"msg":"Server is not running.","time":"2021-03-03T06:56:55.034Z","v":0}
